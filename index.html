<!DOCTYPE html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Animated SPLOMs</title>

  <link rel="stylesheet" href="css/font-awesome.min.css">
  <link rel="stylesheet" href="css/bulma.min.css">
  <link rel="stylesheet" href="css/animate.min.css">

  <link rel="stylesheet" href="css/anisplom.css">
</head>

<body>

<section class="hero is-light">
  <div class="hero-body">
    <div class="container">
      <h1 class="title">
        Animated SPLOMs
      </h1>

      <!-- super fancy subtitle -->
      <p class="subtitle">
        Using
        <!-- animated text -->
        <span class="has-text-weight-bold" id="animation"><span>a</span><span>n</span><span>i</span><span>m</span><span>a</span><span>t</span><span>i</span><span>o</span><span>n</span></span>
        to alleviate overdraw in a
        <!-- multicolored text -->
        <span class="has-text-weight-bold" id="multiclass"><span>m</span><span>u</span><span>l</span><span>t</span><span>i</span><span>c</span><span>l</span><span>a</span><span>s</span><span>s</span></span>
        <!-- underlined text //-->
        <u class="has-text-weight-bold">s</u>catter<u class="has-text-weight-bold">plo</u>t <u class="has-text-weight-bold">m</u>atrix (<span class="has-text-weight-bold">SPLOM</span>).
      </p>

      <!-- github links -->
      <p class="has-text-centered">
        <a class="button is-small is-outlined"><span class="icon"><i class="fa fa-github"></i></span>&nbsp; Website Repository</a>

        <a class="button is-small is-outlined"><span class="icon"><i class="fa fa-github"></i></span>&nbsp; User Study Repository</a>
      </p>

    </div>
  </div>
</section>

<section class="section">
  <div class="content">
    <div class="columns">
      <!-- dropdown for dataset selection -->
      <div class="column is-narrow">
        <label class="label">Select Dataset:</label>

        <p class="control has-icons-left">
          <span class="select">
            <select id="data-select">
              <option value="abalone">abalone</option>
              <option value="diamonds">diamonds</option>
              <option value="iris">iris</option>
              <option value="synthetic">synthetic</option>
              <option value="wine" selected>wine</option>
            </select>
          </span>
          <span class="icon is-small is-left">
            <i class="fa fa-table"></i>
          </span>
        </p>
      </div>

      <!-- div for anisplom chart -->
      <div id="chart" class="column"></div>
    </div>
  </div>
</section>

<!-- information -->
<section class="section">
  <div class="content">
    <h2>Parameters</h2>

    <p>Our tool supports the following URL query parameters:</p>

  </div>
</section>

<footer>
  <div class="columns is-centered">
    <div class="column is-three-quarters">
      <div class="content is-small">
        <p class="has-text-centered has-text-grey">Website built using <a href="https://daneden.github.io/animate.css/">Animate.css</a>, <a href="http://fontawesome.io/">FontAwesome</a>, and the <a href="http://bulma.io/">Bulma</a> CSS framework. This tool is free and unencumbered public domain software. For more information, see <a href="http://unlicense.org/">unlicense.org</a> or the accompanying LICENSE file.</p>
      </div>
    </div>
  </div>
</footer>


<script language="javascript" type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/p5.js/0.4.19/p5.js"></script>
<script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.5.7/addons/p5.dom.js"></script>
<script language="javascript" type="text/javascript" src="multi_scatter.js"></script>
<script language="javascript" type="text/javascript" src="load_data_config.js"></script>

<script language="javascript" type="text/javascript">

  var config;
	var chart;
	var highlight;
	var best = {
		num_points: 0,
		num_classes: 0
	}

  function onDataSelect() {
		config = get_data_config();
		remove();
    chart = multi_scatter(config.path, config.attr, config.category, config.animate, "", "chart");
	  new p5();
		resetHighlightDataDisplay();
	}
  document.getElementById("data-select").addEventListener("change", onDataSelect);

	function getParameterByName(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
	}

	function resetHighlightDataDisplay() {
		updateHighlightDataDisplay("curr", 0, 0);
		updateHighlightDataDisplay("best", 0, 0);
	}

	function updateHighlightDataDisplay(type, num_points, num_classes) {
		// if (type === "curr") {
		// 	document.getElementById("num_points_curr").innerHTML = num_points;
		// 	document.getElementById("num_classes_curr").innerHTML = num_classes;
		// } else {
		// 	document.getElementById("num_points_best").innerHTML = num_points;
		// 	document.getElementById("num_classes_best").innerHTML = num_classes;
		// 	best = {
		// 		num_points: num_points,
		// 		num_classes: num_classes
		// 	}
		// }
	}

	config = get_data_config();
  chart = multi_scatter(config.path, config.attr, config.category, config.animate, null, "chart");
	highlight = getParameterByName("highlight") === "true" ? true : false;

	if (highlight) {
		document.getElementById("highlight_info").style.visibility = "visible";
	}

  function preload() {
		chart.preload();
	}

	function setup() {
		chart.setup();
	}

	function draw() {
		chart.draw();
	}

	function mouseClicked() {
		chart.mouseClicked();
	}

	function mousePressed() {
		chart.mousePressed();
	}

	function mouseReleased() {
		if (chart.mouseReleased() && highlight) {
			var num_points_curr = chart.highlightRect.numPoints;
			var num_classes_curr = chart.highlightRect.numClasses;
			updateHighlightDataDisplay("curr", num_points_curr, num_classes_curr);

			if (num_points_curr > best.num_points) {
				updateHighlightDataDisplay("best", num_points_curr, num_classes_curr);
			}
		}
	}

	function mouseMoved() {
		chart.mouseMoved();
	}

	function mouseDragged() {
		chart.mouseDragged();
	}

</script>
</body>
